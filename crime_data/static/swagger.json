{
  "baseUrl": "/",
  "info": {
    "title": "FBI Crime Data API", 
    "version": "v1"
  },
  "securityDefinitions": {
    "api_key": {
      "type": "apiKey",
      "name": "api_key",
      "in": "query"
    }
  },
  "security": [
    {"api_key": []}
  ],
  "parameters": {
    "aggregateManyParam": {
      "default": "false",
      "in": "query",
      "name": "aggregate_many",
      "description": "TKTK",
      "required": false,
      "type": "string"
    },
    "fieldsParam": {
      "in": "query",
      "name": "fields",
      "description": "Limit response to specific fields only",
      "required": false,
      "type": "string"
    },
    "perPageParam": {
      "default": 10,
      "format": "int32",
      "in": "query",
      "name": "per_page",
      "description": "How many results to show per page. You might want to make this large for CSV downloads",
      "required": false,
      "type": "integer"
    },
    "pageParam": {
      "default": 1,
      "format": "int32",
      "in": "query",
      "name": "page",
      "description": "Which page of results to show",
      "required": false,
      "type": "integer"
    },
    "incidentCountGroupByParam": {
      "in": "query",
      "name": "by",
      "description": "Counts can be provided for statistics grouped by a list of one or more parameters",
      "required": false,
      "type": "array",
      "default": ["year"],
      "collectionFormat": "csv",
      "items": {
        "type": "string",
        "enum": ["year", "month", "offense_subcat", "offense_subcat_code", "offense", "offense_code", "offense_category", "classification", "state", "state_name"]
      }
    },
    "outputParam": {
      "default": "json",
      "in": "query",
      "name": "output",
      "description": "The format to return results in",
      "required": false,
      "type": "string",
      "enum": ["json", "csv"]
    },
    "yearParam": {
      "in": "query",
      "name": "year",
      "description": "Use this field to limit results to a single year. Note that a range can be specified by using the comparison operators and multiple arguments like `&year>2000&year<2010`",
      "required": false,
      "type": "array",
      "collectionFormat": "csv",
      "items": {
        "type": "integer",
        "minimum": 1960
      }
    },
    "monthParam": {
      "in": "query",
      "name": "month",
      "description": "Use this field to limit results to the specified month. Multiple months can be specified with multiple query parameters or by using comparison operators in the query",
      "required": false,
      "allowMultiple": true,
      "type": "array",
      "collectionFormat": "csv",
      "items": {
        "type": "integer",
        "minimum": 1,
        "maximum": 12
      }
    },
    "stateParam": {
      "in": "query",
      "name": "state",
      "description": "The two-letter postal abbreviation for the state",
      "required": false,
      "type": "array",
      "collectionFormat": "csv",
      "items": {
        "type": "string",
        "pattern": "[A-Z]{2}"
      }
    },
    "statePathParam": {
      "in": "path",
      "name": "state_id",
      "description": "The two-letter postal abbreviation for the state",
      "required": true,
      "type": "string"
    },
    "victimCountVariableParam": {
      "in": "path",
      "name": "variable",
      "description": "A specific variable to group victim counts by",
      "required": true,
      "type": "string",
      "enum": ["prop_desc_name", "offense_name", "ethnicity",
               "resident_status_code", "offender_relationship",
               "circumstance_name", "race_code", "location_name",
               "age_num", "sex_code"]
    },
    "offenseCategoryParam": {
      "in": "query",
      "name": "offense_category",
      "description": "The names of SRS offense categories to search against",
      "required": false,
      "type": "array",
      "collectionFormat": "csv",
      "items": {
        "type": "string"
      }
    },
    "explorerOffenseParam": {
      "in": "query",
      "name": "explorer_offense",
      "description": "For the convenience of the Crime Data Explorer, this method takes a generic crime offense name and searches against the specific SRS or NIBRS offense in the backend models",
      "required": false,
      "type": "string",
      "enum": ["aggravated-assault", "arson", "burglary", "larceny", "motor-vehicle-theft", "homicide", "rape", "robbery"]
    }
  },
  "responses": {
    "Error": {
      "description": "The standard error response",
      "schema": {
        "$ref": "#/definitions/Error"
      }
    }
  },
  "definitions": {
    "Error": {
      "type": "object",
      "properties": {
        "message": {
          "description": "An error message",
          "type": "string"
        }
      },
      "required": ["message"]
    },
    "Pagination": {
      "properties": {
        "count": {
          "format": "int32", 
          "type": "integer"
        }, 
        "page": {
          "format": "int32", 
          "type": "integer"
        }, 
        "pages": {
          "format": "int32", 
          "type": "integer"
        }, 
        "per_page": {
          "format": "int32", 
          "type": "integer"
        }
      }, 
      "type": "object",
      "additionalProperties": false
    },
    "IncidentCount": {
      "description": "",
      "required": ["actual", "cleared", "reported", "unfounded"],
      "properties": {
        "actual": {
          "format": "int32",
          "readOnly": true,
          "type": "integer"
        },
        "cleared": {
          "format": "int32",
          "readOnly": true,
          "type": "integer"
        },
        "juvenile_cleared": {
          "format": "int32",
          "readOnly": true,
          "type": "integer"
        },
        "reported": {
          "format": "int32",
          "readOnly": true,
          "type": "integer"
        },
        "unfounded": {
          "format": "int32",
          "readOnly": true,
          "type": "integer"
        },
        "year": {
          "format": "int32",
          "readOnly": true,
          "type": "integer"
        }
      },
      "type": "object"
    },
    "ParticipationCount": {
      "type": "object",
      "required": ["year", "reporting_agencies", "total_agencies", "reporting_rate", "total_population",
                   "nibrs_reporting_agencies", "nibrs_reporting_rate",
                   "covered_population", "nibrs_covered_population"],
      "properties": {
        "year": {
          "format": "int32",
          "type": "integer",
          "description": "The year that these participation statistics were calculated for",
          "minimum": 1960
        },
        "reporting_agencies": {
          "format": "int32",
          "type": "integer"
        },
        "total_agencies": {
          "description": "The total number of agencies for the specific year",
          "format": "int32",
          "type": "integer",
          "minimum": 0
        },
        "reporting_rate": {
          "description": "A rate of which agencies have filed either an SRS or NIBRS report in the given year",
          "format": "float",
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "total_population": {
          "description": "The sum of the population within the jurisdictions of all agencies for that year",
          "anyOf": [
            {
              "format": "int32",
              "type": "integer",
              "minimum": 0
            },
            {
              "type": "null"
            }
          ]
        },
        "nibrs_reporting_agencies": {
          "description": "The number of agencies who filed a NIBRS report in the given year",
          "anyOf": [
            {
              "format": "int32",
              "type": "integer"
            },
            {
              "type": "null"
            }
          ]
        },
        "nibrs_reporting_rate": {
          "description": "A rate of how many agencies filed a NIBRS report in a given year",
          "format": "float",
          "anyOf": [
            {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            {
              "type": "null"
            }
          ]
        },
        "covered_population": {
          "description": "The total population within jurisdictions of agencies who filed either a SRS or NIBRS report in the given year.",
          "anyOf": [
            {
              "format": "int32",
              "type": "integer",
              "minimum": 0
            },
            {
              "type": "null"
            }
          ]
        },
        "nibrs_covered_population": {
          "description": "The total population within jurisdictions of agencies who filed either a NIBRS report in the given year.",
          "anyOf": [
            {
              "format": "int32",
              "type": "integer",
              "minimum": 0
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    "StateParticipationCount": {
      "allOf": [
        {"$ref": "#/definitions/ParticipationCount"},
        {
          "required": ["state_name"],
          "properties": {
            "state_name": {
              "type": "string"
            }
          }
        }
      ]
    },
    "CountForYear": {
      "required": ["year", "count"],
      "properties": {
        "year": {
          "description": "The year for which the counts were computed",
          "type": "string"
        },
        "count": {
          "description": "A count for a specific value of a variable in a given year",
          "oneOf": [
            {
              "type": "integer",
              "minimum": 0
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    "GeoCountyBasicInfo": {
      "description": "Basic information about the county, as returned within the response for the /geo/states endpoint.",
      "required": ["county_id", "county_name"],
      "properties": {
        "county_id": {
          "description": "The internal identifier for the county within the CDE database",
          "format": "int32",
          "type": "integer"
        },
        "county_name": {
          "description": "The name of the county",
          "maxLength": 100,
          "type": "string"
        },
        "fips": {
          "description": "The five character numeric code used to identify the county in the TK",
          "type": "string",
          "minLength": 5,
          "maxLength": 5
        }
      },
      "type": "object"
    },
    "GeoStateDetail": {
      "description": "The record of metadata returned by the /geo/states/<state_id> endpoint to describe a single state",
      "type": "object",
      "properties": {
        "counties": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/GeoCountyBasicInfo"
          }
        },
        "current_year": {
          "description": "The most recent year of data for the state",
          "format": "int32",
          "type": "integer"
        },
        "fips_code": {
          "description": "The two-digit FIPS code for the state",
          "minLength": 2,
          "maxLength": 2,
          "type": "string"
        },
        "name": {
          "description": "The name of the state",
          "type": "string"
        },
        "participation": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ParticipationCount"
          }
        }
      },
      "required": ["name", "current_year", "participation", "counties", "fips_code"]
    }
  },
  "schemes": ["https"],
  "host": "crime-data-api.fbi.gov",
  "produces": ["application/json", "text/csv"],
  "paths": {
    "/geo/states/{state_id}": {
      "get": {
        "description": "Returns basic information about the state",
        "parameters": [
          {"$ref": "#/parameters/statePathParam"}
        ],
        "responses": {
          "default": {
            "description": "The standard error response",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "200": {
            "description": "The metadata for a state",
            "schema": {
              "$ref": "#/definitions/GeoStateDetail"
            }
          }
        }
      }
    },
    "/geo/states/{state_id}/participation": {
      "get": {
        "description": "Returns just the participation data for a state",
        "parameters": [
          {"$ref": "#/parameters/aggregateManyParam"},
          {"$ref": "#/parameters/fieldsParam"},
          {"$ref": "#/parameters/pageParam"},
          {"$ref": "#/parameters/perPageParam"},
          {"$ref": "#/parameters/outputParam"},
          {"$ref": "#/parameters/statePathParam"}
        ],
        "responses": {
          "default": {
            "description": "The standard error response",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "200": {
            "description": "For success, return a paginated list of participation stats. Note that if you request `output=csv`, you probably want to also make `per_page` sufficiently large to include all data.",
            "schema": {
              "required": ["pagination", "results"],
              "properties": {
                "pagination": {
                  "$ref": "#/definitions/Pagination"
                },
                "results": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/StateParticipationCount"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/counts": {
      "get": {
        "description": "Returns counts by year for incidents.\nIncidents can also be grouped for counting with the `by` parameter, which accepts 1 or more of the following fields in a comma-delimited list: `year`, `month`, `offense_subcat`, `offense_subcat_code`, `offense`, `offense_code`, `offense_category`, `classification`, `state`, `state_name`",
        "parameters": [
          {"$ref": "#/parameters/aggregateManyParam"},
          {"$ref": "#/parameters/fieldsParam"},
          {"$ref": "#/parameters/pageParam"},
          {"$ref": "#/parameters/perPageParam"},
          {"$ref": "#/parameters/outputParam"},
          {"$ref": "#/parameters/incidentCountGroupByParam"},
          {"$ref": "#/parameters/yearParam"},
          {"$ref": "#/parameters/monthParam"},
          {"$ref": "#/parameters/stateParam"},
          {"$ref": "#/parameters/offenseCategoryParam"},
          {"$ref": "#/parameters/explorerOffenseParam"}
        ],
        "responses": {
          "default": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "200": {
            "description": "",
            "schema": {
              "required": ["pagination", "results"],
              "properties": {
                "pagination": {
                  "$ref": "#/definitions/Pagination"
                },
                "results": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/IncidentCount"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "summary"
        ]
      }
    },
    "/participation/national": {
      "get": {
      "tags": ["participation", "national"],
        "description": "Returns national participation data",
        "parameters": [
          {"$ref": "#/parameters/aggregateManyParam"},
          {"$ref": "#/parameters/fieldsParam"},
          {"$ref": "#/parameters/pageParam"},
          {"$ref": "#/parameters/perPageParam"},
          {"$ref": "#/parameters/outputParam"}
        ],
        "responses": {
          "default": {
            "description": "Standard error response",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "200": {
            "description": "Returns a paginated list of statistics for nationwide participation per year in revers chronological order",
            "schema": {
              "type": "object",
              "required": ["pagination", "results"],
              "properties": {
                "pagination": {
                  "$ref": "#/definitions/Pagination"
                },
                "results": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/ParticipationCount"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/victims/count/national/{variable}": {
      "description": "Foo bar baz quux",
      "get": {
        "tags": ["counts", "victims"],
        "parameters": [
          {"$ref": "#/parameters/victimCountVariableParam"},
          {"$ref": "#/parameters/aggregateManyParam"},
          {"$ref": "#/parameters/fieldsParam"},
          {"$ref": "#/parameters/pageParam"},
          {"$ref": "#/parameters/perPageParam"},
          {"$ref": "#/parameters/outputParam"}
        ],
        "responses": {
          "default": {
            "$ref": "#/responses/Error"
          },
          "200": {
            "description": "",
            "schema": {
              "required": ["pagination", "results"],
              "properties": {
                "pagination": {
                  "$ref": "#/definitions/Pagination"
                },
                "results": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/CountForYear"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/victims/count/states/{state_id}/{variable}": {
      "description": "Foo bar baz quux",
      "get": {
        "tags": ["counts", "victims"],
        "parameters": [
          {"$ref": "#/parameters/statePathParam"},
          {"$ref": "#/parameters/victimCountVariableParam"},
          {"$ref": "#/parameters/aggregateManyParam"},
          {"$ref": "#/parameters/fieldsParam"},
          {"$ref": "#/parameters/pageParam"},
          {"$ref": "#/parameters/perPageParam"},
          {"$ref": "#/parameters/outputParam"}
        ],
        "responses": {
          "default": {
            "$ref": "#/responses/Error"
          },
          "200": {
            "description": "",
            "schema": {
              "required": ["pagination", "results"],
              "properties": {
                "pagination": {
                  "$ref": "#/definitions/Pagination"
                },
                "results": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/CountForYear"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "swagger": "2.0", 
  "tags": []
}
